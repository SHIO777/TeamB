<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>THROTTLE.html</title>
    <script type="text/javascript" src="/webiopi.js"></script>
    <link rel="stylesheet" type="text/css" href="adjustment_throttle.css">
  </head>
  <body>
    <div align="center">
        <a href="menu.html" style="color:black;">menu</a><br>
        <h3>THROTTLE</h3>
        <tr>
          <td>
            <input type="button" value="グラフを表示" id="Graph" onclick="Graph()">
            <img src="graph2.png" id="G" width=300 border="0" align="center">
            <table id="table">
              <tbody>
                <tr>
                    <th></th><th>最小値</th><th>最大値</th><th> x </th><th> y </th><th></th>
                </tr>
                <tr>
                    <td align="right">現在の値</td>
                    <td align="center"><span id="a1"></span></td>
                    <td align="center"><span id="a2"></span></td>
                    <td align="center"><span id="a3"></span></td>
                    <td align="center"><span id="a4"></span></td>
                    <td><input type = "button" value="取得" id="c1" onclick="func11();func12();func13();func14();"></td>
                </tr>
                <tr>
                    <td align="right">入力値</td>
                    <td align="center"><input type="number" min="1000" max="2000" id="b1"></td>
                    <td align="center"><input type="number" min="1000" max="2000" id="b2"></td>
                    <td align="center"><input type="number" min="1000" max="2000" id="b3"></td>
                    <td align="center"><input type="number" min="1000" max="2000" id="b4"></td>
                </tr>
                <tr>
                    <td></td>
                    <td align="center"><input type="button" id="d1" value="送信" onclick="func21();func11();Graph()"></td>
                    <td align="center"><input type="button" id="d2" value="送信" onclick="func22();func12();Graph()"></td>
                    <td align="center"><input type="button" id="d3" value="送信" onclick="func23();func13();Graph()"></td>
                    <td align="center"><input type="button" id="d3" value="送信" onclick="func24();func14();Graph()"></td>
                </tr>   
              </tbody>
            </table>
          </td>
        </tr>
    </div>
<script>
webiopi().ready(R1);

function R1(){
    webiopi().callMacro("Load31",1,Back11);
    webiopi().callMacro("Load32",1,Back12);
    webiopi().callMacro("Load33",1,Back13);
    webiopi().callMacro("Load34",1,Back14);
}

function Graph(){
    webiopi().callMacro("GetGraph");
    Display();
}
function Display(){
    document.getElementById("G").src="graph2.png?"+(new Date()-0);
}
function func11(){
    var g1 = document.getElementById("a1");
    webiopi().callMacro("Load31",1, Back11);}
function Back11(macro,args,number){
    a1.innerHTML = number;
    webiopi().callMacro("main12",1);
    webiopi().callMacro("GET2",0);
}

function func12(){
    var g2 = document.getElementById("a2");
    webiopi().callMacro("Load32",1, Back12);}
function Back12(macro,args,number){
    a2.innerHTML = number;}

function func13(){
    var g3 = document.getElementById("a3");
    webiopi().callMacro("Load33",1, Back13);}
function Back13(macro,args,number){
    a3.innerHTML = number;}

function func14(){
    var g3 = document.getElementById("a4");
    webiopi().callMacro("Load34",1, Back14);}
function Back14(macro,args,number){
    a4.innerHTML = number;}

function func21(){
    var h1 = document.getElementById("b1"); //min
    var i1 = h1.value;
    if (i1<1000){alert("最小値を1000以上にしてください");}
    else if(i1>2000){alert("最小値を2000以下にしてください");}
    else{
        webiopi().callMacro("Send31",i1);
        console.log(i1);
    }
}
function func22(){
    var h2 = document.getElementById("b2"); //neutral
    var i2 = h2.value;
    if (i2<1000){alert("中立値を1000以上にしてください");}
    else if(i2>2000){alert("中立値を2000以下にしてください");}
    else{
        webiopi().callMacro("Send32",i2);
        console.log("いいね");
    }
}

function func23(){
    var h3 = document.getElementById("b3"); //max
    var i3 = h3.value;
    if (i3>100){alert("xを100以下にしてください");}
    else{
        webiopi().callMacro("Send33",i3);
        console.log("いいね");
    }
}

function func24(){
    var h4 = document.getElementById("b4"); //max
    var i4 = h4.value;
    if (i4<1000){alert("yを1000以上にしてください");}
    else if(i4>2000){alert("yを2000以下にしてください");}
    else{
        webiopi().callMacro("Send34",i4);
        console.log("いいね");
    }
}


</script>
  </body>
</html>



    